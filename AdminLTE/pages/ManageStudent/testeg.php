<!DOCTYPE html>
<html lang="en">

<head>
 <meta charset="utf-8">
 <meta name="viewport" content="width=device-width, initial-scale=1">
 <meta name="csrf-token" content="N0WfAfyEuDPxMmRpZDMvfINnKUfBBbgCPbJVI7oF">
 <title>Guardians
 </title>
 <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
 <link rel="stylesheet" href="https://portal.schoolpetal.com/assets/plugins/fontawesome-free/css/all.min.css">
 <link rel="stylesheet" href="https://portal.schoolpetal.com/assets/css/adminlte.min.css">
 <link rel="stylesheet" href="https://portal.schoolpetal.com/assets/plugins/select2/css/select2.min.css">
 <link rel="stylesheet" href="https://portal.schoolpetal.com/assets/plugins/select2-bootstrap4-theme/select2-bootstrap4.min.css">
 <link rel="stylesheet" href="https://portal.schoolpetal.com/assets/plugins/sweetalert2-theme-bootstrap-4/bootstrap-4.min.css">
 <link rel="stylesheet" href="https://portal.schoolpetal.com/assets/plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css">
 <script type="text/javascript" src="https://gc.kis.v2.scr.kaspersky-labs.com/FD126C42-EBFA-4E12-B309-BB3FDD723AC1/main.js?attr=pdirWit7oIKQ6I3UzNlG6bqM8N299slcT2Nm3Gx2E2kWH31XvphqBgU9t1ICbjyEIAMAZKsbH5MlzY_HlwxCr1OSGQ1N16JRuk-hVZxf-3g" charset="UTF-8"></script>
 <script src="https://portal.schoolpetal.com/assets/js/littlealert.js"></script>

 <link rel="stylesheet" href="https://portal.schoolpetal.com/assets/plugins/datatables-bs4/css/dataTables.bootstrap4.min.css">
 <link rel="stylesheet" href="https://portal.schoolpetal.com/assets/plugins/datatables-responsive/css/responsive.bootstrap4.min.css">
 <link rel="stylesheet" href="https://portal.schoolpetal.com/assets/plugins/datatables-buttons/css/buttons.bootstrap4.min.css">


 <link rel="icon" href="https://portal.schoolpetal.com/assets/img/favicon.png">

 <style>
  .profile_pics {
   width: 50px;
   height: 50px;
  }

  .object-cover {
   object-fit: cover;
  }

  .profile-user-img {
   width: 100px;
   height: 100px;
  }
 </style>


</head>

<body class="hold-transition sidebar-mini layout-fixed">
 <div class="wrapper">


  <nav class="main-header navbar navbar-expand navbar-white navbar-light">
   <ul class="navbar-nav">
    <li class="nav-item">
     <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
    </li>
    <li class="nav-item d-none d-sm-inline-block">
     <a href="#" class="nav-link"><b>SchoolPetal International School</b></a>
    </li>
   </ul>

   <ul class="navbar-nav ml-auto">
    <li class="nav-item">
     <a class="nav-link" data-widget="navbar-search" href="#" role="button">
      <i class="fas fa-search"></i>
     </a>
     <div class="navbar-search-block">
      <form class="form-inline">
       <div class="input-group input-group-sm">
        <input class="form-control form-control-navbar" type="search" placeholder="Search" aria-label="Search">
        <div class="input-group-append">
         <button class="btn btn-navbar" type="submit">
          <i class="fas fa-search"></i>
         </button>
         <button class="btn btn-navbar" type="button" data-widget="navbar-search">
          <i class="fas fa-times"></i>
         </button>
        </div>
       </div>
      </form>
     </div>
    </li>
    <li class="nav-item">
     <a class="nav-link" data-widget="fullscreen" href="#" role="button">
      <i class="fas fa-expand-arrows-alt"></i>
     </a>
    </li>
    <li class="nav-item">
     <a class="nav-link" data-widget="control-sidebar" data-slide="true" href="#" role="button">
      <i class="fas fa-user-alt"></i>
     </a>
    </li>
   </ul>
  </nav>

  <aside class="main-sidebar sidebar-dark-primary elevation-4">

   <a href="#" class="brand-link">
    <img src="https://apis.schoolpetal.com/assets/img/schools/8012145schoolpetal-international-school.jpg" alt="SchoolPetal Logo" class="brand-image img-circle elevation-3" style="opacity: .5">
    <span class="brand-text font-weight-bolder">School Petal</span>
   </a>

   <div class="sidebar">
    <div class="user-panel mt-3 pb-3 mb-3 d-flex">
     <div class="image">

     </div>
     <img src="https://apis.schoolpetal.com/assets/img/students/user.png" class="profile_pics object-cover img-circle elevation-2   " alt="Img">

     <div class="info">
      <a href="#" class="d-block">SchoolPetal</a>
     </div>
    </div>
    <nav class="mt-2">
     <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">

      <li class="nav-item">
       <a href="/control/dashboard" class="nav-link">
        <i class="fa fa-home" aria-hidden="true"></i>
        <p>Dashboard</p>
       </a>
      </li>



      <li class="nav-item">
       <a href="#" class="nav-link">
        <i class="fa fa-graduation-cap" aria-hidden="true"></i>
        <p>
         Manage Students
         <i class="fas fa-angle-left right"></i>
        </p>
       </a>
       <ul class="nav nav-treeview">
        <li class="nav-item">
         <a href="/control/register_guardian" class="nav-link">
          <i class="far fa-circle nav-icon"></i>
          <p>Register Guardians</p>
         </a>
        </li>

        <li class="nav-item">
         <a href="/control/register_student" class="nav-link">
          <i class="far fa-circle nav-icon"></i>
          <p>Register Students</p>
         </a>
        </li>

        <li class="nav-item">
         <a href="/control/all_student" class="nav-link">
          <i class="far fa-circle nav-icon"></i>
          <p>All Students</p>
         </a>
        </li>

       </ul>
      </li>

      <li class="nav-item">
       <a href="#" class="nav-link">
        <i class="fas fa-user-plus"></i>
        <p>
         Staff Management
         <i class="fas fa-angle-left right"></i>
        </p>
       </a>
       <ul class="nav nav-treeview">
        <li class="nav-item">
         <a href="/control/add_staff" class="nav-link">
          <i class="far fa-circle nav-icon"></i>
          <p>Add New Staff</p>
         </a>
        </li>

        <li class="nav-item">
         <a href="#" class="nav-link">
          <i class="far fa-circle nav-icon"></i>
          <p>View All Staffs</p>
         </a>
        </li>


       </ul>
      </li>









      <li class="nav-item">
       <a href="#" class="nav-link">
        <i class="fa fa-clipboard" aria-hidden="true"></i>
        <p>
         Class Management
         <i class="fas fa-angle-left right"></i>
        </p>
       </a>
       <ul class="nav nav-treeview">
        <li class="nav-item">
         <a href="/control/category_arm" class="nav-link">
          <i class="far fa-circle nav-icon"></i>
          <p>Category/Arm</p>
         </a>
        </li>

        <li class="nav-item">
         <a href="/control/create_class" class="nav-link">
          <i class="far fa-circle nav-icon"></i>
          <p>Classes</p>
         </a>
        </li>
       </ul>
      </li>

      <li class="nav-item">
       <a href="#" class="nav-link">
        <i class="fas fa-subscript"></i>
        <p>
         Subjects Info
         <i class="fas fa-angle-left right"></i>
        </p>
       </a>
       <ul class="nav nav-treeview">
        <li class="nav-item">
         <a href="/control/add_subject" class="nav-link">
          <i class="far fa-circle nav-icon"></i>
          <p>Create/View Subjects</p>
         </a>
        </li>

        <li class="nav-item">
         <a href="/control/subject/assign" class="nav-link">
          <i class="far fa-circle nav-icon"></i>
          <p>View Subject Teachers</p>
         </a>
        </li>


       </ul>
      </li>


      <li class="nav-item">
       <a href="#" class="nav-link">
        <i class="fas fa-subscript"></i>
        <p>
         Results Mgm
         <i class="fas fa-angle-left right"></i>
        </p>
       </a>
       <ul class="nav nav-treeview">
        <li class="nav-item">
         <a href="/control/result/check/" class="nav-link">
          <i class="far fa-circle nav-icon"></i>
          <p>Students Results</p>
         </a>
        </li>

        <li class="nav-item">
         <a href="/control/result/class/" class="nav-link">
          <i class="far fa-circle nav-icon"></i>
          <p>Class Result </p>
         </a>
        </li>


       </ul>
      </li>



      <li class="nav-item">
       <a href="#" class="nav-link">
        <i class="fas fa-toolbox"> </i>
        <p>
         School Settings
         <i class="fas fa-angle-left right"></i>
        </p>
       </a>
       <ul class="nav nav-treeview">
        <li class="nav-item">
         <a href="/control/setting/result" class="nav-link">
          <i class="far fa-circle nav-icon"></i>
          <p>Results Settings</p>
         </a>
        </li>
        <li class="nav-item">
         <a href="/control/setting/permission" class="nav-link">
          <i class="far fa-circle nav-icon"></i>
          <p>Permission Setup</p>
         </a>
        </li>
        <li class="nav-item">
         <a href="/control/setting/general" class="nav-link">
          <i class="far fa-circle nav-icon"></i>
          <p>General Setup</p>
         </a>
        </li>

        <li class="nav-item">
         <a href="/control/setting/sub/10" class="nav-link">
          <i class="far fa-circle nav-icon"></i>
          <p>Registration Slots</p>
         </a>
        </li>

       </ul>
      </li>



      <li class="nav-item">
       <a href="/control/managepromotion" class="nav-link">
        <i class="fas fa-scroll    "></i>
        <p>Manage Promotions</p>
       </a>
      </li>




      <li class="nav-item">
       <a href="#" class="nav-link">
        <i class="fas fa-money-bill-wave-alt"></i>
        <p>
         School Fees Control
         <i class="fas fa-angle-left right"></i>
        </p>
       </a>
       <ul class="nav nav-treeview">
        <li class="nav-item">
         <a href="/control/fee" class="nav-link">
          <i class="far fa-circle nav-icon"></i>
          <p>Create Fee Category</p>
         </a>
        </li>

        <li class="nav-item">
         <a href="/control/set_fee" class="nav-link">
          <i class="far fa-circle nav-icon"></i>
          <p>Set School Fee</p>
         </a>
        </li>


       </ul>
      </li>

      <li class="nav-item">
       <a href="#" class="nav-link">
        <i class="fa fa-sticky-note" aria-hidden="true"></i>
        <p>
         Levy Payment Report
         <i class="fas fa-angle-left right"></i>
        </p>
       </a>
       <ul class="nav nav-treeview">
        <li class="nav-item">
         <a href="/control/fee/daily" class="nav-link">
          <i class="far fa-circle nav-icon"></i>
          <p>Daily Payments</p>
         </a>
        </li>
        <li class="nav-item">
         <a href="/control/fee/weekly" class="nav-link">
          <i class="far fa-circle nav-icon"></i>
          <p>Weekly Payments</p>
         </a>
        </li>
        <li class="nav-item">
         <a href="/control/fee/termly" class="nav-link">
          <i class="far fa-circle nav-icon"></i>
          <p>Termly Payments</p>
         </a>
        </li>

        <li class="nav-item">
         <a href="/control/fee/range" class="nav-link">
          <i class="far fa-circle nav-icon"></i>
          <p>Fee Across Date Range</p>
         </a>
        </li>
       </ul>
      </li>


      <li class="nav-item">
       <a href="#" class="nav-link">
        <i class="fa fa-book" aria-hidden="true"></i>
        <p>
         Student Result
         <i class="fas fa-angle-left right"></i>
        </p>
       </a>
       <ul class="nav nav-treeview">
        <li class="nav-item">
         <a href="/control/result/upload/" class="nav-link">
          <i class="far fa-circle nav-icon"></i>
          <p>Upload Result</p>
         </a>
        </li>

        <li class="nav-item">
         <a href="/control/broad-sheet" class="nav-link">
          <i class="far fa-circle nav-icon"></i>
          <p>View Broad Sheet</p>
         </a>
        </li>


       </ul>
      </li>




      <li class="nav-item">
       <a href="#" class="nav-link">
        <i class="fa fa-user" aria-hidden="true"></i>
        <p>My Profile</p>
       </a>
      </li>


      <li class="nav-item">
       <a href="/logout" onclick="return confirm('Are you sure you want to log out')" class="nav-link">
        <i class="fa fa-power-off" aria-hidden="true"></i>
        <p>Log Out</p>
       </a>
      </li>

     </ul>
    </nav>
   </div>
  </aside>


  <div class="content-wrapper">
   <div class="littleAlert"></div>

   <div class="content-header">
    <div class="container-fluid">
     <div class="row mb-2">
      <div class="col-sm-6">
       <h1 class="m-0">Guardians</h1>
      </div>
      <div class="col-sm-6">
       <ol class="breadcrumb float-sm-right">
        <li class="breadcrumb-item"><a href="/control/dashboard">Home</a></li>
        <li class="breadcrumb-item active">Guardians</li>
       </ol>
      </div>
     </div>
    </div>
   </div>


   <section class="content">
    <div class="row">
     <div class="col-md-12 col-12">
      <div class="card card-secondary card-outline">
       <div class="card-header">
        <h3 class="card-title ">
         <i class="fa fa-plus-square" aria-hidden="true"></i>
         Register Guardian
        </h3>
       </div>
       <div class="card-body">
        <form action="" id="registerGuardian" class="row">
         <div class=" col-md-4 form-group">
          <label>Name</label>
          <input type="text" name="name" class="form-control" placeholder="Gurdians name">
         </div>
         <div class=" col-md-4 form-group">
          <label>Home Address</label>
          <input type="text" name="address" class="form-control" placeholder="Lekki, Nigeria">
         </div>
         <div class=" col-md-4 form-group">
          <label>Email Address</label>
          <input type="email" name="email" class="form-control" placeholder="mail@gmail.com">
         </div>
         <div class=" col-md-4 form-group">
          <label>Phone Number</label>
          <input type="text" name="phone" class="form-control" placeholder="090000000000">
         </div>
         <div class=" col-md-4 form-group">
          <label>State of Origin</label>
          <input type="text" name="state" class="form-control" placeholder="Lagos">
         </div>
         <div class=" col-md-4 form-group">
          <label>L.G.A</label>
          <input type="text" name="lga" class="form-control" placeholder="ikeja">
         </div>

         <div class="col-md-12">
          <button class="btn btn-secondary float-right registerGuardian">Register Gurdian</button>
         </div>
        </form>
       </div>



      </div>


      <div class="card card-secondary card-outline">
       <div class="card-header">
        <h3 class="card-title ">
         <i class="fa fa-list-alt" aria-hidden="true"></i>
         Guardians List
        </h3>
       </div>
       <div class="card-body p-1">
        <div class="table-responsive">
         <table id="example1" class="table mb-0 table-bordered table-hover table-striped">
          <thead>
           <tr>
            <th>#</th>
            <th>Name</th>
            <th>Email</th>
            <th>Phone</th>
            <th>Address</th>
            <th></th>
           </tr>
          </thead>
          <tbody id="guardian_body_list">

          </tbody>
         </table>
        </div>

        <div id="page_links">

        </div>
       </div>

      </div>



     </div>

    </div>
   </section>


   <script src="https://portal.schoolpetal.com/assets/plugins/jquery/jquery.min.js"></script>

   <script>
    $(function() {
     $.ajaxSetup({
      headers: {
       'Authorization': `Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIxIiwianRpIjoiNjUyYWMzNDg4ZDNhNzJiYTJhOGMxM2E0NDYxNDk0YTBkODZkMmY3MTkxZTI1MDY5OWJkNmNmN2MyYjZkNzRkNDI4NWNkMzRlNzllNDc3NTAiLCJpYXQiOjE2OTE3MDQ5NzIuODE0MTk1LCJuYmYiOjE2OTE3MDQ5NzIuODE0MjA2LCJleHAiOjE3MjMzMjczNzIuNzg2MjQyLCJzdWIiOiIyMCIsInNjb3BlcyI6W119.CP4XGCAUPpVKLbPmNTxRDUngRqcdaJNdgxGZ-OcpOUgO8FInhRFfS6riPf3FxZ5fLGR15WJ0EUcmY47UYG29Qz-OCSs8oXo3a4Y8kmhCBWwRZl7f3RK55uiKjbBl1iEXRoSPMdAB0u6K35cQdjZXtEIjn2Tu9c6mobM2pzjQvC155bZIykEVk9-iTdqJ4VKlH1c8pPwjWWH-Qb9zwvbUd3MHFvt5MYiqXNjkmuc8Cx-8pEgma7u1ZSq3XYIU-VRWAJbvCn-UE-yjDGkyVy2wojvkSaT-ujZ2JpEgeoxgN148pmjp9RDMBtPXPuEaUfiv1h-gPU9Epia4ndO7YnL1t4ZTtiMlU2hWqWWgzLfNmWZAproPQUVjEVwV9KIIgll-3auUTknAjg6Ty7PzmYk15E529bG4BmonE-2W83BOXx9PIcTqlbvv0iZYDH_MUYHup0J-YltcxfzpCEI-ErrUv4gL0rn-QdsMcOpH9aF4004-XWwMF854fWqK1KTJ3TE-DpUbyIKrtuB48zEsN6DDyQ2nMeE0U0gULq1T61sjhlbwu2B_9NRdZws1s_hebeLSijTJHxzKiN-_nuhwnhKLxtmeA1bMfKlYIpbREG0pZ6oE_6w-NebMT7GImwDP4oAHra0QBfHv3QyWtGsj_QFDp4k_T9iRZVVZwdu4AvddGFQ`
      }
     });


     function fetchParentSummary() {
      page = '1'
      $.ajax({
       method: 'get',
       url: api_url + 'fetch_guardians_info_summmary?page=' + page
      }).done(function(res) {
       body = $('#guardian_body_list');
       body.html(``)
       res.data.data.map((guard, index) => {
        body.append(`
                            <tr>
                                <td>${index+1 + ((page-1) * 100)}</td>
                                <td>${guard.guardian_name}</td>
                                <td>${guard.guardian_email}</td>
                                <td>${guard.guardian_phone}</td>
                                <td>${guard.guardian_address}</td>
                                <td> <a href="/control/guardian_profile/${guard.id}"> Profile <i class="fa fa-arrow-circle-right"></i> </a> </td>
                            </tr>
                        `)
       })

       link_body = $('#page_links')
       link_body.html(dropPaginatedPages(res.data.links));


      }).fail(function(res) {})
     }


     $('#registerGuardian').on('submit', function(e) {
      e.preventDefault();
      form = $(this);

      name = $(form).find('input[name="name"]').val();
      address = $(form).find('input[name="address"]').val();
      email = $(form).find('input[name="email"]').val();
      phone = $(form).find('input[name="phone"]').val();
      state = $(form).find('input[name="state"]').val();
      lga = $(form).find('input[name="lga"]').val();

      if (!name || !address || !email || !phone || !phone) {
       littleAlert('All fields are required', 1);
       return;
      }

      $.ajax({
       method: 'post',
       url: api_url + 'create_guardian_profile',
       data: {
        guardian_name: name,
        guardian_address: address,
        guardian_email: email,
        guardian_phone: phone,
        state: state,
        lga: lga,
       },
       beforeSend: () => {
        btnProcess('.registerGuardian', 'Register Guardian', 'before')
       }
      }).done(function(res) {
       littleAlert(res.message);
       btnProcess('.registerGuardian', 'Register Guardian', 'after')
       body = $('#guardian_body_list');
       body.prepend(`
                        <tr>
                            <td>#</td>
                            <td>${name}</td>
                            <td>${email}</td>
                            <td>${phone}</td>
                            <td>${address}</td>
                            <td> <a href="#"> Profile<i class="fa fa-arrow-circle-right"></i> </a> </td>
                        </tr>
                    `)

       fetchParentSummary();
       form[0].reset();


      }).fail(function(res) {
       parseError(res.responseJSON);
       btnProcess('.registerGuardian', 'Register Guardian', 'after')
      })
     })






     setTimeout(() => {
      $("#example1").DataTable({
       "responsive": true,
       "lengthChange": false,
       "autoWidth": false,
       "buttons": ["copy", "csv", "excel", "pdf", "print"],
       "paging": false,
       "searching": true,
       "ordering": true,
       "info": true,
       "autoWidth": true,
       "responsive": false,
      }).buttons().container().appendTo('#example1_wrapper .col-md-6:eq(0)');
     }, 2500);

     fetchParentSummary();
    })
   </script>


  </div>

  <footer class="main-footer">
   <strong>Copyright &copy; <b>School Petal</b> </strong>
   All rights reserved.
   <div class="float-right d-none d-sm-inline-block">
    <b>Version</b> 2.5
   </div>
  </footer>


  <script src="https://portal.schoolpetal.com/assets/plugins/jquery/jquery.min.js"></script>
  <script src="https://portal.schoolpetal.com/assets/plugins/jquery-ui/jquery-ui.min.js"></script>
  <script src="https://portal.schoolpetal.com/assets/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="https://portal.schoolpetal.com/assets/plugins/select2/js/select2.full.min.js"></script>
  <script src="https://portal.schoolpetal.com/assets/plugins/sweetalert2/sweetalert2.min.js"></script>



  <script src="https://portal.schoolpetal.com/assets/plugins/datatables/jquery.dataTables.min.js"></script>
  <script src="https://portal.schoolpetal.com/assets/plugins/datatables-bs4/js/dataTables.bootstrap4.min.js"></script>
  <script src="https://portal.schoolpetal.com/assets/plugins/datatables-responsive/js/dataTables.responsive.min.js"></script>
  <script src="https://portal.schoolpetal.com/assets/plugins/datatables-responsive/js/responsive.bootstrap4.min.js"></script>
  <script src="https://portal.schoolpetal.com/assets/plugins/datatables-buttons/js/dataTables.buttons.min.js"></script>
  <script src="https://portal.schoolpetal.com/assets/plugins/datatables-buttons/js/buttons.bootstrap4.min.js"></script>
  <script src="https://portal.schoolpetal.com/assets/plugins/jszip/jszip.min.js"></script>
  <script src="https://portal.schoolpetal.com/assets/plugins/pdfmake/pdfmake.min.js"></script>
  <script src="https://portal.schoolpetal.com/assets/plugins/pdfmake/vfs_fonts.js"></script>
  <script src="https://portal.schoolpetal.com/assets/plugins/datatables-buttons/js/buttons.html5.min.js"></script>
  <script src="https://portal.schoolpetal.com/assets/plugins/datatables-buttons/js/buttons.print.min.js"></script>
  <script src="https://portal.schoolpetal.com/assets/plugins/datatables-buttons/js/buttons.colVis.min.js"></script>


  <script src="https://portal.schoolpetal.com/assets/js/adminlte.js"></script>

  <script>
   $(function() {
    $('.select2').select2()
    $('.select2bs4').select2({
     theme: 'bootstrap4'
    })
   })
  </script>

  <script>
   $(function() {
    var Toast = Swal.mixin({
     toast: true,
     position: 'top-end',
     showConfirmButton: false,
     timer: 3000
    });

    function firstToast(icon = "success", message = 'Done') {
     Toast.fire({
      icon: icon,
      title: message
     });
    }
   })
  </script>
</body>

</html>